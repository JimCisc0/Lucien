
     var Discord= require("./discord.js");
     const readline = require('readline');
     const fichier = require('fs');

exports.add= function(word,channel){
    found  = false;
    var w = new String(word);
  
    const rl = readline.createInterface({
    input: fichier.createReadStream('wordlist'),
    crlfDelay: Infinity
     });

  

   rl.on('line', (line) => {
   var l =new String(line); 
   
   
   if(((l.toUpperCase()=== w.toUpperCase())&&(found==false))){
     found = true;
     console.log("mot déjà existant");
     let serverembed = new Discord.RichEmbed()
     .setDescription("Mot non autorisé")
     .setColor("#FE0101")
     .addField("mot déjà banni" , w )
     
      return channel.send(serverembed)
      
    } }).on('close',function(){
        if((found==false)){
    fichier.appendFile("wordlist", "\n" + w , function(err) {
    if(err) {
        
        return console.log(err);
        
     };

     let serverembed = new Discord.RichEmbed()
     .setDescription("Mot non autorisé")
     .setColor("#15f153")
     .addField("le mot est ajouté à la liste des mots bannis" , w )
     
      return channel.send(serverembed)
    });

    
}
})};